<div class="wifi-page">
    <!-- WiFi Header -->
    <div class="dashboard-header">
        <div class="header-content">
            <h1 class="dashboard-title">
                <i class="bi bi-wifi me-2"></i>
                {{ call .t "wifi.title" "WiFi Management" }}
            </h1>
            <p class="dashboard-subtitle">{{ call .t "wifi.subtitle" "Manage your wireless network connections" }}</p>
        </div>
    </div>

    <!-- WiFi Status Card -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="dashboard-card">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-wifi me-2"></i>
                        {{ call .t "wifi.wifi_status" "WiFi Status" }}
                    </h5>
                    <button class="btn btn-sm btn-outline-light" id="refresh-wifi-status" onclick="loadConnectionStatus()">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                </div>
                <div class="dashboard-card-body">
                    <div class="wifi-status-controls">
                        <div class="wifi-status-display mb-4">
                            <div class="stat-card wifi-status-card">
                                <div class="stat-icon">
                                    <i class="bi bi-wifi" id="wifi-status-icon"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label">{{ call .t "wifi.wifi_status" "WiFi Status" }}</div>
                                    <div class="stat-value" id="wifi-status-value">--</div>
                                    <div class="stat-progress">
                                        <div class="stat-progress-bar" id="wifi-status-bar" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wifi-actions-grid">
                            <div class="wifi-action-item">
                                <label class="form-label wifi-interface-label">
                                    <i class="bi bi-router me-2"></i>
                                    {{ call .t "wifi.interface" "WiFi Interface" }}
                                </label>
                                <div class="wifi-interface-select-wrapper">
                                    <select class="form-select wifi-interface-select" id="wifi-interface" name="interface">
                                        <option value="">{{ call .t "wifi.auto_detect" "Auto-detect" }}</option>
                                    </select>
                                    <i class="bi bi-chevron-down wifi-interface-select-icon"></i>
                                </div>
                            </div>
                            <div class="wifi-action-item">
                                <label class="form-label">{{ call .t "wifi.actions" "Actions" }}</label>
                                <div class="wifi-buttons-group">
                                    <button class="btn btn-warning btn-lg" id="unblock-wifi-btn" onclick="unblockWiFi()" style="display: none;">
                                        <i class="bi bi-unlock me-2"></i>
                                        <span>{{ call .t "wifi.unblock_wifi" "Unblock WiFi" }}</span>
                                    </button>
                                    <button class="btn btn-secondary btn-lg" id="toggle-software-switch-btn" onclick="toggleSoftwareSwitch()">
                                        <i class="bi bi-toggle-off" id="software-switch-icon"></i>
                                        <span id="software-switch-text">{{ call .t "wifi.enable_software_switch" "Enable Software Switch" }}</span>
                                    </button>
                                    <button class="btn btn-primary btn-lg" id="toggle-wifi-btn" onclick="toggleWiFi()">
                                        <i class="bi bi-wifi" id="toggle-wifi-icon"></i>
                                        <span id="toggle-wifi-text">{{ call .t "wifi.enable_wifi" "Enable WiFi" }}</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scan and Connect Networks -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="dashboard-card">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-list me-2"></i>
                        {{ call .t "wifi.available_networks" "Available Networks" }}
                    </h5>
                </div>
                <div class="dashboard-card-body">
                    <div id="networks-loading" class="text-center py-5" style="display: none;">
                        <div class="spinning mb-3"><i class="bi bi-arrow-clockwise" style="font-size: 2rem;"></i></div>
                        <p class="mt-2">{{ call .t "wifi.scanning" "Scanning..." }}</p>
                        <small class="text-muted">{{ call .t "wifi.scan_time" "This may take 10-15 seconds" }}</small>
                    </div>
                    <div id="networks-empty" class="text-center py-5" style="display: none;">
                        <i class="bi bi-wifi-off" style="font-size: 4rem; opacity: 0.5;"></i>
                        <p class="mt-3">{{ call .t "wifi.no_networks" "No networks found" }}</p>
                        <p class="text-muted small">{{ call .t "wifi.no_networks_desc" "No WiFi networks were found in your area. Make sure WiFi is enabled and try again." }}</p>
                        <button class="btn btn-primary mt-3" onclick="scanNetworks()">
                            <i class="bi bi-search me-2"></i>
                            {{ call .t "wifi.scan_networks" "Scan Networks" }}
                        </button>
                    </div>
                    <div id="networks-table-container" style="display: none;">
                        <div class="networks-cards-container" id="networksTable">
                            <!-- Networks will be loaded here as cards -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Current Connection Details -->
    <div class="row">
        <div class="col-12">
            <div class="dashboard-card">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-info-circle me-2"></i>
                        {{ call .t "wifi.connection_details" "Connection Details" }}
                    </h5>
                </div>
                <div class="dashboard-card-body">
                    <div class="info-grid" id="connection-info">
                        <div class="info-item">
                            <span class="info-label">{{ call .t "wifi.status" "Status" }}</span>
                            <span class="info-value" id="connection-status">
                                <span class="spinning"><i class="bi bi-arrow-clockwise"></i></span> {{ call .t "common.loading" "Loading..." }}
                            </span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "wifi.network_ssid" "SSID" }}</span>
                            <span class="info-value" id="connection-ssid">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "wifi.network_signal" "Signal" }}</span>
                            <span class="info-value" id="connection-signal">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "wifi.network_security" "Security" }}</span>
                            <span class="info-value" id="connection-security">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "wifi.network_channel" "Channel" }}</span>
                            <span class="info-value" id="connection-channel">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "wifi.ip_address" "IP Address" }}</span>
                            <span class="info-value" id="connection-ip">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "wifi.mac_address" "MAC Address" }}</span>
                            <span class="info-value" id="connection-mac">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "wifi.speed" "Speed" }}</span>
                            <span class="info-value" id="connection-speed">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<link href="/static/css/wifi.css" rel="stylesheet">
