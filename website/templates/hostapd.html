<div class="hostapd-page dashboard-page">
    <!-- HostAPD Header -->
    <div class="dashboard-header">
        <div class="header-content">
            <h1 class="dashboard-title">
                <i class="bi bi-router me-2"></i>
                {{ call .t "hostapd.title" "HostAPD Hotspot" }}
            </h1>
            <p class="dashboard-subtitle">{{ call .t "hostapd.subtitle" "Manage your wireless access point" }}</p>
        </div>
    </div>

    <!-- HostAPD Status Cards -->
    <div class="row quick-stats-row mb-4 g-3 g-md-4">
        <div class="col-12 col-sm-6 col-lg-3 mb-3 mb-md-4">
            <div class="dashboard-card info-card hostapd-status-stat">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-heart-pulse me-2" id="hostapd-status-icon"></i>
                        {{ call .t "hostapd.status" "Status" }}
                    </h5>
                </div>
                <div class="dashboard-card-body">
                    <div class="stat-content">
                        <div class="stat-value" id="hostapd-status-value">--</div>
                        <div class="stat-progress mt-2">
                            <div class="stat-progress-bar" id="hostapd-status-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-3 mb-3 mb-md-4">
            <div class="dashboard-card info-card access-points-stat">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-wifi me-2"></i>
                        {{ call .t "hostapd.access_points" "Access Points" }}
                    </h5>
                </div>
                <div class="dashboard-card-body">
                    <div class="stat-content">
                        <div class="stat-value" id="access-points-count">0</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-3 mb-3 mb-md-4">
            <div class="dashboard-card info-card clients-stat">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-people me-2"></i>
                        {{ call .t "hostapd.clients" "Clients" }}
                    </h5>
                </div>
                <div class="dashboard-card-body">
                    <div class="stat-content">
                        <div class="stat-value" id="clients-count">0</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-3 mb-3 mb-md-4">
            <div class="dashboard-card info-card bandwidth-stat">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-speedometer2 me-2"></i>
                        {{ call .t "hostapd.bandwidth" "Bandwidth" }}
                    </h5>
                </div>
                <div class="dashboard-card-body">
                    <div class="stat-content">
                        <div class="stat-value" id="bandwidth-value">--</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Grid -->
    <div class="row dashboard-grid mb-4 g-3">
        <!-- HostAPD Status and Controls -->
        <div class="col-12">
            <div class="dashboard-card info-card">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-heart-pulse me-2"></i>
                        {{ call .t "hostapd.status" "Status" }}
                    </h5>
                    <button class="btn btn-sm btn-outline-light" onclick="loadHostAPDStatus()">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                </div>
                <div class="dashboard-card-body">
                    <div id="hostapdStatusContainer">
                        <div class="text-center py-4">
                            <div class="spinning mb-3"><i class="bi bi-arrow-clockwise" style="font-size: 2rem;"></i></div>
                            <p class="text-muted">{{ call .t "common.loading" "Loading..." }}</p>
                        </div>
                    </div>
                    <div class="d-grid gap-2 mt-3">
                        <button class="btn btn-outline-success" id="toggle-hostapd-btn" onclick="toggleHostAPD()">
                            <i class="bi bi-router me-2"></i>
                            <span id="toggle-hostapd-text">{{ call .t "hostapd.enable_hostapd" "Enable HostAPD" }}</span>
                        </button>
                        <button class="btn btn-outline-primary" onclick="restartHostAPD()">
                            <i class="bi bi-arrow-clockwise me-2"></i>
                            {{ call .t "hostapd.restart_hostapd" "Restart HostAPD" }}
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Access Points -->
        <div class="col-12">
            <div class="dashboard-card info-card">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-wifi me-2"></i>
                        {{ call .t "hostapd.access_points" "Access Points" }}
                    </h5>
                    <button class="btn btn-sm btn-outline-light" onclick="loadAccessPoints()">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                </div>
                <div class="dashboard-card-body">
                    <div id="accessPointsContainer">
                        <div class="text-center py-4">
                            <div class="spinning mb-3"><i class="bi bi-arrow-clockwise" style="font-size: 2rem;"></i></div>
                            <p class="text-muted">{{ call .t "common.loading" "Loading..." }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Clients and Configuration -->
    <div class="row dashboard-grid mb-4 g-3">
        <!-- Connected Clients -->
        <div class="col-12">
            <div class="dashboard-card info-card">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-people me-2"></i>
                        {{ call .t "hostapd.clients" "Connected Clients" }}
                    </h5>
                    <button class="btn btn-sm btn-outline-light" onclick="loadClients()">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                </div>
                <div class="dashboard-card-body">
                    <div id="clientsContainer">
                        <div class="text-center py-4">
                            <div class="spinning mb-3"><i class="bi bi-arrow-clockwise" style="font-size: 2rem;"></i></div>
                            <p class="text-muted">{{ call .t "common.loading" "Loading..." }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- HostAPD Configuration -->
        <div class="col-12">
            <div class="dashboard-card info-card">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-gear me-2"></i>
                        {{ call .t "hostapd.configuration" "Configuration" }}
                    </h5>
                </div>
                <div class="dashboard-card-body">
                    <form id="hostapdConfigForm">
                        <div class="mb-3">
                            <label for="hostapd-interface" class="form-label">{{ call .t "hostapd.interface" "Interface" }}</label>
                            <select class="form-select" id="hostapd-interface" name="interface" required>
                                <option value="">{{ call .t "hostapd.select_interface" "Select Interface" }}</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="hostapd-ssid" class="form-label">{{ call .t "hostapd.access_point_ssid" "SSID" }}</label>
                            <input type="text" class="form-control" id="hostapd-ssid" name="ssid" placeholder="HostBerry-AP" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="hostapd-password" class="form-label">{{ call .t "hostapd.access_point_password" "Password" }}</label>
                            <div class="password-input-wrapper">
                                <input type="password" class="form-control" id="hostapd-password" name="password" placeholder="Enter password">
                                <button type="button" class="btn btn-outline-secondary password-toggle-btn" onclick="toggleHostAPDPassword()">
                                    <i class="bi bi-eye" id="hostapd-password-toggle-icon"></i>
                                </button>
                            </div>
                            <small class="form-text text-muted">{{ call .t "hostapd.password_help" "Leave empty for open network" }}</small>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="hostapd-channel" class="form-label">{{ call .t "hostapd.access_point_channel" "Channel" }}</label>
                                <select class="form-select" id="hostapd-channel" name="channel" required>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6" selected>6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="10">10</option>
                                    <option value="11">11</option>
                                    <option value="12">12</option>
                                    <option value="13">13</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="hostapd-security" class="form-label">{{ call .t "hostapd.access_point_security" "Security" }}</label>
                                <select class="form-select" id="hostapd-security" name="security" required>
                                    <option value="wpa2" selected>WPA2</option>
                                    <option value="wpa3">WPA3</option>
                                    <option value="open">{{ call .t "hostapd.open" "Open" }}</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="hostapd-gateway" class="form-label">{{ call .t "hostapd.gateway" "Gateway (Router)" }}</label>
                            <input type="text" class="form-control" id="hostapd-gateway" name="gateway" placeholder="192.168.4.1" value="192.168.4.1" pattern="^([0-9]{1,3}\.){3}[0-9]{1,3}$">
                            <small class="form-text text-muted">{{ call .t "hostapd.gateway_help" "IP address for the access point gateway" }}</small>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="hostapd-dhcp-start" class="form-label">{{ call .t "hostapd.dhcp_range_start" "DHCP Range Start" }}</label>
                                <input type="text" class="form-control" id="hostapd-dhcp-start" name="dhcp_range_start" placeholder="192.168.4.2" value="192.168.4.2" pattern="^([0-9]{1,3}\.){3}[0-9]{1,3}$">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="hostapd-dhcp-end" class="form-label">{{ call .t "hostapd.dhcp_range_end" "DHCP Range End" }}</label>
                                <input type="text" class="form-control" id="hostapd-dhcp-end" name="dhcp_range_end" placeholder="192.168.4.254" value="192.168.4.254" pattern="^([0-9]{1,3}\.){3}[0-9]{1,3}$">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="hostapd-lease-time" class="form-label">{{ call .t "hostapd.lease_time" "Lease Time" }}</label>
                                <input type="text" class="form-control" id="hostapd-lease-time" name="lease_time" placeholder="12h" value="12h">
                                <small class="form-text text-muted">{{ call .t "hostapd.lease_time_help" "Example: 12h, 30m, 1d" }}</small>
                            </div>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-check-circle me-2"></i>
                                {{ call .t "common.save" "Save Configuration" }}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script defer src="/static/js/hostapd.js?v={{ .last_update }}"></script>
