<div class="dashboard-page">
    <!-- Header Section -->
    <div class="dashboard-header mb-4">
        <div class="header-content">
            <h1 class="dashboard-title">
                <i class="bi bi-info-circle me-2"></i>
                {{ call .t "navigation.about" "About" }}
            </h1>
            <p class="dashboard-subtitle">{{ call .t "about.description" "Information about HostBerry" }}</p>
        </div>
    </div>

    <!-- About Content -->
    <div class="row">
        <div class="col-12 mb-4">
            <div class="dashboard-card">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-gear-wide-connected me-2"></i>
                        {{ call .t "about.hostberry" "HostBerry" }}
                    </h5>
                </div>
                <div class="dashboard-card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">{{ call .t "about.version" "Version" }}</span>
                            <span class="info-value" id="about-version">2.0.0</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "about.description_full" "Description" }}</span>
                            <span class="info-value">{{ call .t "common.app_description" "HostBerry - Network Management System for Raspberry Pi" }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "about.author" "Author" }}</span>
                            <span class="info-value">{{ call .t "about.author_name" "HostBerry Team" }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 mb-4">
            <div class="dashboard-card">
                <div class="dashboard-card-header">
                    <h5 class="dashboard-card-title">
                        <i class="bi bi-server me-2"></i>
                        {{ call .t "about.system_info" "System Information" }}
                    </h5>
                </div>
                <div class="dashboard-card-body">
                    <div class="info-grid" id="about-system-info">
                        <div class="info-item">
                            <span class="info-label">{{ call .t "dashboard.hostname" "Hostname" }}</span>
                            <span class="info-value" id="about-hostname">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "dashboard.os_version" "OS Version" }}</span>
                            <span class="info-value" id="about-os">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "dashboard.kernel_version" "Kernel" }}</span>
                            <span class="info-value" id="about-kernel">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "dashboard.architecture" "Architecture" }}</span>
                            <span class="info-value" id="about-architecture">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "dashboard.cpu_cores" "CPU Cores" }}</span>
                            <span class="info-value" id="about-cores">--</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">{{ call .t "dashboard.uptime" "Uptime" }}</span>
                            <span class="info-value" id="about-uptime">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.about-page {
    padding: 0;
    color: var(--hb-text-light);
    background: transparent;
    max-width: 1400px;
    margin: 0 auto;
}

.dashboard-card {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
}

.dashboard-card:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.15);
    transform: translateY(-2px);
}

.dashboard-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.dashboard-card-title {
    font-size: 1.25rem;
    font-weight: 600;
    margin: 0;
    color: var(--hb-text-light);
    display: flex;
    align-items: center;
}

.dashboard-card-body {
    color: var(--hb-text-light);
}

.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.info-label {
    font-size: 0.875rem;
    color: var(--hb-text-muted);
    font-weight: 500;
}

.info-value {
    font-size: 1rem;
    color: var(--hb-text-light);
    font-weight: 400;
}

@media (max-width: 768px) {
    .info-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .dashboard-card {
        padding: 1rem;
    }
}
</style>

<script>
(function() {
    const setText = (id, value) => {
        const el = document.getElementById(id);
        if (el) el.textContent = value || '--';
    };

    const formatUptime = (seconds) => {
        if (!Number.isFinite(seconds) || seconds < 0) return '--';
        const days = Math.floor(seconds / 86400);
        const hours = Math.floor((seconds % 86400) / 3600);
        const minutes = Math.floor((seconds % 3600) / 60);
        if (days > 0) return days + 'd ' + hours + 'h';
        if (hours > 0) return hours + 'h ' + minutes + 'm';
        return minutes + 'm';
    };

    async function loadSystemInfo() {
        try {
            const apiRequestFn = window.HostBerry && window.HostBerry.apiRequest 
                ? window.HostBerry.apiRequest 
                : async function(url) {
                    const token = localStorage.getItem('access_token');
                    const headers = { 'Content-Type': 'application/json' };
                    if (token) {
                        headers['Authorization'] = 'Bearer ' + token;
                    }
                    return fetch(url, { headers: headers });
                };

            const [statsResp, infoResp] = await Promise.all([
                apiRequestFn('/api/v1/system/stats'),
                apiRequestFn('/api/v1/system/info')
            ]);

            if (statsResp.ok) {
                const stats = await statsResp.json();
                setText('about-cores', stats.cpu_cores || '--');
                const uptimeSeconds = stats.uptime || stats.uptime_seconds || 0;
                setText('about-uptime', formatUptime(uptimeSeconds));
            }

            if (infoResp.ok) {
                const info = await infoResp.json();
                setText('about-hostname', info.hostname || '--');
                setText('about-os', info.os_version || '--');
                setText('about-kernel', info.kernel_version || info.kernel || '--');
                setText('about-architecture', info.architecture || '--');
            }
        } catch (error) {
            console.error('Error loading system info:', error);
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        loadSystemInfo();
    });
})();
</script>
